
<div *ngIf="room.id else no_room">
  <div class="flexbox">
    <div #scroll id="chat_box" class="chat-box" >
      <div class="chat-box-header">
        <h3>{{ room.name }}<br />
          <small>
            Avec
            <span *ngFor="let user of room.users">
              {{user.intra_name}},
            </span>
          </small>
        </h3>
      </div>
      <div id="chat_box_body" class="chat-box-body">
        <div id="chat_messages">
          <ng-container *ngFor="let message of (messages$ | async)">
            <ng-container *ngIf="message.user.id === user.id">
              <div class="profile my-profile">
                <span> Moi </span>
                <img src="{{ message.user.avatar_url }}" width="30" height="30" />
              </div>
              <div class="message my-message">
                {{ message.content }}
              </div>
            </ng-container>
            <ng-container *ngIf="message.user.id !== user.id">
              <div class="profile other-profile">
                <img class="" src="{{ message.user.avatar_url }}" width="30" height="30" />
                
                <span> {{ message.user.intra_name }} </span>
                <div id="{{message.id}}" class="message other-message">
                  {{ message.content }}
                </div>
                <span class="date">
                  Envoyé le {{ message.createdAt | date: 'dd/MM/yyyy à HH:mm' }}
                </span>
              </div>
            </ng-container>
          </ng-container>
        </div>
      </div>
        <form [formGroup]="form" (ngSubmit)="sendMessage()" class="chat-box-footer">
          <textarea id="chat_input" placeholder="Entrez votre message ici" formControlName="message" ></textarea>
          <button mat-raised-button color="primary" type="submit" (action)="sendMessage()" class="send">
            <svg style="width:24px;height:24px" viewBox="0 0 24 24">
              <path fill="#006ae3" d="M2,21L23,12L2,3V10L17,12L2,14V21Z" />
            </svg>
          </button>
        </form>
    </div>  
  </div>
</div>

  <ng-template #no_room>
    <mat-error style="margin: 30%;">Aucun groupe sélectionné</mat-error>
  </ng-template>




