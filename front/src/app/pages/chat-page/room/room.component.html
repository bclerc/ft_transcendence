
<div *ngIf="room.id else no_room">
	<div *ngIf="!show">
		<div class="flexbox">
			<div #scroll id="chat_box" class="chat-box" >
	
				<!-- CLASS chat-box-header -->
        <section class="chat-box-header">
          <div class="chat-box-info">
            <div *ngIf="room.type === 'DM'"  style="display: flex">
              <img src="{{friend.avatar_url}}" alt="{{friend.intra_name}}" class="user-dm-avatar" >
              <h2  style="display: flex; flex-direction: row;" >{{ friend.intra_name }}</h2>
            </div>
            <h2 *ngIf="room.type === 'GROUP'" >{{ room.name }}</h2>
            <p id="description">{{room.description}}</p>
            <ng-container *ngIf="room.type === 'GROUP'">







              <!--- MatChip list with avatar. chip id is #membres -->
              <mat-chip-list #membres>
                <mat-chip id="membres" *ngFor="let member of room.users" >
                  <img matChipAvatar class="chip_avatar" src="{{member. avatar_url}}" alt="User avatar">
                  {{member.intra_name}}


                  <svg  *ngIf="member.state ==='ONLINE'" style="margin-left: 10px;" width="12px" height="12px" viewBox="0 0 12 12" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                    <title>Oval</title>
                    <g id="UI" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                        <g id="Chat-aucun-amis" transform="translate(-965.000000, -558.000000)" fill="yellowgreen">
                            <g id="Group-2" transform="translate(863.000000, 180.000000)">
                                <g id="Group-3" transform="translate(28.000000, 368.000000)">
                                    <circle id="Oval" cx="80" cy="16" r="6"></circle>
                                </g>
                            </g>
                        </g>
                    </g>
                </svg> 

                </mat-chip> 
              </mat-chip-list>


              
              <!-- <p id="membres" *ngFor="let user of room.users">{{user.intra_name}}</p> -->
            </ng-container>
          </div>

          
          <!-- Settings -->
          <div class="chat-box-settings">
              <img *ngIf="room.type === 'GROUP'" src="../../../../assets/svg/settings.svg" alt="settings" (click)="showParam()">
          </div>
        </section>
	
				<!-- CLASS chat-box-body -->
				<div id="chat_box_body" class="chat-box-body">
					<div id="chat_messages">
						<ng-container *ngFor="let message of (messages$ | async)">
							<ng-container *ngIf="message.user.id === user.id">
								<!-- <div class="profile my-profile">
									<span> Moi </span>
									<img src="{{ message.user.avatar_url }}"/>
								</div> -->
								<div class="message my-message">{{ message.content }}</div>
							</ng-container>
							<ng-container *ngIf="message.user.id !== user.id">
								<div class="profile other-profile">
									<p> {{ message.user.intra_name }} </p>
									<div id="{{message.id}}" class="message other-message">{{ message.content }}</div>
									<span class="date">Envoyé le {{ message.createdAt | date: 'dd/MM/yyyy à HH:mm' }}</span>
								</div>
							</ng-container>
						</ng-container>
					</div>
				</div>
	
				<!-- CLASS chat-box-footer -->
				<form [formGroup]="form" (ngSubmit)="sendMessage()" class="chat-box-footer">
					<div class="chat-input">
						<input matInput id="chat-input-text" placeholder="J’ecris le super message de la mort qui tue ici" formControlName="message" >
						<!-- Bouton send + icon -->
						<button class="send" mat-raised-button type="submit" (action)="sendMessage()" class="send">
							<svg width="22px" height="22px" viewBox="0 0 22 22">
								<title>send icon</title>
								<g id="Symbols" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
									<g id="incons/support" transform="translate(-9.000000, -9.000000)" fill="#FEEFCF" stroke="#FEEFCF">
										<path d="M29.6363636,10.3636364 C29.4090909,10.1363636 29.0909091,10 28.7727273,10 C28.3181818,10 27.8636364,10.0909091 27.4545455,10.2727273 L10.7272727,17.1363636 C10.2727273,17.3181818 10,17.7272727 10,18.1818182 C10,18.6363636 10.2727273,19.0454545 10.7272727,19.2272727 L15.409732,21.0528514 C15.6370047,21.1437605 15.909732,21.0073969 16.0006411,20.7801241 C16.0915502,20.5528514 15.9551866,20.2801241 15.7279138,20.189215 L11.0454545,18.3636364 C10.9545455,18.3636364 10.9090909,18.2727273 10.9090909,18.1818182 C10.9090909,18.0909091 10.9545455,18 11.0454545,18 L27.8181818,11.0909091 C28.1363636,10.9545455 28.4545455,10.9090909 28.7727273,10.9090909 C28.8636364,10.9090909 28.9545455,10.9545455 29,11 C29.0454545,11.0454545 29.0909091,11.1363636 29.0909091,11.2272727 C29.0909091,11.5454545 29.0454545,11.8636364 28.9090909,12.1818182 L22,28.9545455 C21.9545455,29.0909091 21.6818182,29.1363636 21.5909091,28.9545455 L18.6818182,21.9090909 L26.2272727,14.4090909 C26.4090909,14.2272727 26.4090909,13.9545455 26.2272727,13.7727273 C26.0454545,13.5909091 25.7727273,13.5909091 25.5909091,13.7727273 L17.8636364,21.5 C17.7727273,21.5909091 17.7272727,21.6818182 17.7272727,21.8181818 L17.7272727,27.5359244 C17.7272727,27.8086517 17.9090909,27.9904699 18.1818182,27.9904699 C18.4545455,27.9904699 18.6363636,27.8086517 18.6363636,27.5359244 L18.6363636,24.1363636 L20.7727273,29.3181818 C20.9545455,29.7272727 21.3636364,30 21.8181818,30 C22.2727273,30 22.6818182,29.7272727 22.8636364,29.2727273 L29.7272727,12.5454545 C29.9090909,12.1363636 30,11.6818182 30,11.2272727 C30,10.9090909 29.8636364,10.5909091 29.6363636,10.3636364" id="Fill-1"></path>
									</g>
								</g>
							</svg>
						</button>
					</div>
				</form>
			</div>
		</div>
	</div>

</div>

<div *ngIf="show === true">
	<div class="param-header">
		<img src="../../../../assets/svg/return.svg" alt="return" (click)="hideParam()">
		<h2>Paramètres</h2>
		<button id="action" mat-Button matTooltip="quitter le groupe">
			Quitter
			<img src="../../../../assets/svg/quit.svg" alt="add">
		</button>
	</div>

	<!-- CLASS chat-box-body -->
	<div id="param-body">
		<div id="edit">
			<div id="title-n-button">
				<h3>Éditer le groupe</h3>
				<button mat-Button matTooltip="Enregister les mofifications">
					Sauvegarder
					<img src="../../../../assets/svg/checked.svg" alt="save">
				</button>
			</div>
			<div class="lol">
				<div class="demi-left">
					<!-- Nom du groupe -->
					<div id="input-box">
						<p id="input-title">Nom du groupe</p>
						<textarea id="input-text" placeholder="Super groupe de la mort" default="caca" formControlName="name"></textarea>
						<!-- <p id="input-error" *ngIf="name.touched && name.hasError('required')">Il faut nommer ton groupe superbes</p> -->
					</div>

					<div id="public-left">
						<!-- Public -->
						<mat-checkbox id="public-check-box" matCheckBox formControlName="public">Public</mat-checkbox>
						<div id="input-box">
							<p id="input-title">Mot de passe</p>
							<textarea id="input-text" placeholder="•••••••••••" formControlName="password"></textarea>
						</div>
					</div>
				</div>

				<div class="demi-right">
					<div id="input-box">
						<p id="input-title">Description</p>
						<textarea id="input-text" placeholder="Super description de la mort qui tue" formControlName="description"></textarea>
					</div>
				</div>
			</div>
		</div>
		<div id="gerer">
			<div id="title-n-button">
				<h3>Gérer les membres</h3>
				<button mat-Button matTooltip="Ajouter un membre">
					Ajouter
					<img src="../../../../assets/svg/plus-de-mort.svg" alt="add">
				</button>
			</div>
			<div id="membre" *ngFor="let user of room.users">
				<div class="info">
					<div class="user-name">
						<p id="user-name">{{user.intra_name}}</p>
						<p id="user-status"> entrain de jouer...</p>
					</div>
					<div class="buts">
						<button id="action" mat-Button matTooltip="inviter a jouer">
							<svg width="24px" height="20px" viewBox="0 0 24 20">
								<title>invite-game</title>
								<g id="UI" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
									<g id="invite-game" transform="translate(-954.000000, -640.000000)" fill="#feefcf">
										<g id="icon-invite-game" transform="translate(954.000000, 638.000000)">
											<path d="M10.5882353,3.52941176 C10.5882353,2.74971565 11.2203039,2.11764706 12,2.11764706 C12.7796961,2.11764706 13.4117647,2.74971565 13.4117647,3.52941176 L13.4117647,4.94117647 L21.2941176,4.94117647 C22.3986871,4.94117647 23.2941176,5.83660697 23.2941176,6.94117647 L23.2941176,19.8823529 C23.2941176,20.9869224 22.3986871,21.8823529 21.2941176,21.8823529 L2.70588235,21.8823529 C1.60131285,21.8823529 0.705882353,20.9869224 0.705882353,19.8823529 L0.705882353,6.94117647 C0.705882353,5.83660697 1.60131285,4.94117647 2.70588235,4.94117647 L10.5882353,4.94117647 L10.5882353,3.52941176 Z M16.9411765,9.52941176 C14.7970121,9.52941176 13.0588235,11.2676004 13.0588235,13.4117647 C13.0588235,15.555929 14.7970121,17.2941176 16.9411765,17.2941176 C19.0853408,17.2941176 20.8235294,15.555929 20.8235294,13.4117647 C20.8235294,11.2676004 19.0853408,9.52941176 16.9411765,9.52941176 Z M7.36764706,9.52941176 L6.75,9.52941176 C6.37030423,9.52941176 6.05650904,9.81156565 6.00684662,10.1776412 L6,10.2794118 L5.99947059,12.3524118 L3.92647059,12.3529412 C3.54677482,12.3529412 3.23297963,12.6350951 3.1833172,13.0011706 L3.17647059,13.1029412 L3.17647059,13.7205882 C3.17647059,14.100284 3.45862447,14.4140792 3.82470003,14.4637416 L3.92647059,14.4705882 L5.99947059,14.4704118 L6,16.5441176 C6,16.9238134 6.28215388,17.2376086 6.64822944,17.287271 L6.75,17.2941176 L7.36764706,17.2941176 C7.74734282,17.2941176 8.06113802,17.0119638 8.11080044,16.6458882 L8.11764706,16.5441176 L8.11747059,14.4704118 L10.1911765,14.4705882 C10.5708722,14.4705882 10.8846674,14.1884344 10.9343299,13.8223588 L10.9411765,13.7205882 L10.9411765,13.1029412 C10.9411765,12.7232454 10.6590226,12.4094502 10.292947,12.3597878 L10.1911765,12.3529412 L8.11747059,12.3524118 L8.11764706,10.2794118 C8.11764706,9.8651982 7.78186062,9.52941176 7.36764706,9.52941176 Z M16.9411765,11.2941176 C18.1107206,11.2941176 19.0588235,12.2422205 19.0588235,13.4117647 C19.0588235,14.5813089 18.1107206,15.5294118 16.9411765,15.5294118 C15.7716323,15.5294118 14.8235294,14.5813089 14.8235294,13.4117647 C14.8235294,12.2422205 15.7716323,11.2941176 16.9411765,11.2941176 Z" id="Combined-Shape"></path>
										</g>
									</g>
								</g>
							</svg>
						</button>
						<button id="action" mat-Button matTooltip="Ajouter en ami">
							<svg width="24px" height="20px" viewBox="0 0 24 20">
								<title>ask-friend</title>
								<g id="UI" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
									<g id="ask-friend" transform="translate(-1009.000000, -640.000000)" fill="#feefcf">
										<g id="icon-ask-friend" transform="translate(1009.000000, 638.000000)">
											<path d="M23.2311963,9.3520338 C23.2724624,9.4263128 23.2941176,9.50988314 23.2941176,9.59485527 L23.2941176,19.2941176 C23.2941176,20.3986871 22.3986871,21.2941176 21.2941176,21.2941176 L2.70588235,21.2941176 C1.60131285,21.2941176 0.705882353,20.3986871 0.705882353,19.2941176 L0.705882353,9.59485527 C0.705882353,9.31871289 0.929739978,9.09485527 1.20588235,9.09485527 C1.29085448,9.09485527 1.37442482,9.11651052 1.44870382,9.15777663 L11.5143571,14.7498062 C11.8163796,14.9175965 12.1836204,14.9175965 12.4856429,14.7498062 L22.5512962,9.15777663 C22.792688,9.02367004 23.0970897,9.11064194 23.2311963,9.3520338 Z M21.4117647,2.82352941 C22.4513595,2.82352941 23.2941176,3.66628753 23.2941176,4.70588235 L23.2941176,6.2908264 C23.2941176,6.47411238 23.1938341,6.64270778 23.0327747,6.73019277 L12.4773141,12.4637571 C12.1796443,12.6254468 11.8203557,12.6254468 11.5226859,12.4637571 L0.967225281,6.73019277 C0.806165895,6.64270778 0.705882353,6.47411238 0.705882353,6.2908264 L0.705882353,4.70588235 C0.705882353,3.66628753 1.54864047,2.82352941 2.58823529,2.82352941 L21.4117647,2.82352941 Z" id="Combined-Shape"></path>
										</g>
									</g>
								</g>
							</svg>
						</button>
						<button id="action" mat-Button matTooltip="Rendre muet">
							<svg width="24px" height="24px" viewBox="0 0 24 24">
								<title>mute</title>
								<g id="UI" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
									<g id="mute" transform="translate(-1119.000000, -638.000000)" fill="#feefcf">
										<g id="icon-mute" transform="translate(1119.000000, 638.000000)">
											<path d="M22.1902598,4.30027113 C22.9189722,4.59894433 23.4322511,5.31534568 23.4322511,6.15162973 L23.4322511,19.0928062 C23.4322511,20.1973757 22.5368206,21.0928062 21.4322511,21.0928062 L9.88680171,21.0928062 C9.77999698,21.0928062 9.67599869,21.1270065 9.59004039,21.1903976 L6.79983455,23.24807 C6.57759039,23.4119667 6.26456133,23.3646668 6.10066458,23.1424226 C6.03727355,23.0564643 6.00307323,22.9524661 6.00307323,22.8456613 L6.00307323,21.5928062 C6.00307323,21.3166638 5.7792156,21.0928062 5.50307323,21.0928062 L5.39601577,21.0925753 L22.1902598,4.30027113 Z M21.549505,1.00939808 L21.9862474,1.4461405 C22.2791406,1.73903372 22.2791406,2.21390746 21.9862474,2.50680067 L2.08327126,22.4097768 C1.79037804,22.7026701 1.31550431,22.7026701 1.02261109,22.4097768 L0.585868667,21.9730344 C0.292975448,21.6801412 0.292975448,21.2052675 0.585868667,20.9123742 L20.4888448,1.00939808 C20.7817381,0.71650486 21.2566118,0.71650486 21.549505,1.00939808 Z M15.3500158,4.15157526 L0.844015775,18.6575753 L0.844015775,6.15162973 C0.844015775,5.04706023 1.73944628,4.15162973 2.84401577,4.15162973 L15.3500158,4.15157526 Z" id="Combined-Shape"></path>
										</g>
									</g>
								</g>
							</svg>
						</button>
						<button id="action" mat-Button matTooltip="Bloquer">
							<svg width="20px" height="21px" viewBox="0 0 20 21">
								<title>block</title>
								<g id="UI" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
									<g id="block" transform="translate(-1066.000000, -640.000000)" fill="#feefcf">
										<g id="icon-block" transform="translate(1064.000000, 638.000000)">
											<path d="M11.9263687,2.51806722 C17.3842415,2.51806722 21.8087217,6.94254734 21.8087217,12.4004202 C21.8087217,17.858293 17.3842415,22.2827731 11.9263687,22.2827731 C6.46849589,22.2827731 2.04401577,17.858293 2.04401577,12.4004202 C2.04401577,6.94254734 6.46849589,2.51806722 11.9263687,2.51806722 Z M17.7607519,9.09217872 L8.61812728,18.2348033 C9.59430535,18.7895133 10.723342,19.1063025 11.9263687,19.1063025 C15.6299253,19.1063025 18.6322511,16.1039767 18.6322511,12.4004202 C18.6322511,11.1973934 18.3154618,10.0683568 17.7607519,9.09217872 Z M11.9263687,5.6945378 C8.22281216,5.6945378 5.22048636,8.6968636 5.22048636,12.4004202 C5.22048636,13.6191242 5.5455859,14.7618972 6.11379281,15.7467469 L15.2726954,6.58784425 C14.2878457,6.01963734 13.1450727,5.6945378 11.9263687,5.6945378 Z" id="Combined-Shape"></path>
										</g>
									</g>
								</g>
							</svg>
						</button>
						<button id="action" mat-Button matTooltip="Exclure">
							<svg width="22px" height="22px" viewBox="0 0 22 22">
								<title>exclure</title>
								<g id="UI" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
									<g id="exclure" transform="translate(-1176.000000, -639.000000)">
										<g id="icon-exclure" transform="translate(1174.000000, 638.000000)" fill="#feefcf">
											<path d="M17.5417957,1.41176471 C18.6463652,1.41176471 19.5417957,2.30719521 19.5417957,3.41176471 L19.5415294,7.02576471 L17.6762834,5.80801314 C17.3279048,5.58055363 16.9292269,5.44424092 16.5167524,5.40993647 L16.3095344,5.40133521 C14.984051,5.40133521 13.8994958,6.43287115 13.8148521,7.73695953 L13.8095344,7.90133521 L13.8091115,8.65594954 L12.0681115,8.65634675 C11.0137497,8.65634675 10.1499463,9.47222454 10.0735972,10.5070844 L10.0681115,10.6563467 L10.0681115,13.3436533 C10.0681115,14.398015 10.8839892,15.2618184 11.9188491,15.3381675 L12.0681115,15.3436533 L13.8091115,15.3429495 L13.8095344,16.0986054 C13.8095344,16.5840081 13.9508429,17.0589127 14.2162124,17.4653544 C14.9395955,18.573293 16.3924586,18.9182116 17.5298086,18.2806742 L17.6762834,18.1919275 L19.5415294,16.9737647 L19.5417957,20.5882353 C19.5417957,21.6928048 18.6463652,22.5882353 17.5417957,22.5882353 L4.82352941,22.5882353 C3.71895991,22.5882353 2.82352941,21.6928048 2.82352941,20.5882353 L2.82352941,3.41176471 C2.82352941,2.30719521 3.71895991,1.41176471 4.82352941,1.41176471 L17.5417957,1.41176471 Z M16.6408669,7.33043661 C16.8350279,7.33043661 17.0249898,7.38696 17.1875665,7.49310778 L22.8078949,11.1626712 C23.2703388,11.464605 23.400458,12.0842556 23.0985241,12.5466996 C23.0228162,12.6626544 22.9238497,12.7616209 22.8078949,12.8373288 L17.1875665,16.5068922 C16.7251225,16.8088261 16.1054719,16.6787069 15.803538,16.216263 C15.6973903,16.0536863 15.6408669,15.8637245 15.6408669,15.6695634 L15.6399381,13.6714823 L12.7399381,13.6718266 C12.1876533,13.6718266 11.7399381,13.2241114 11.7399381,12.6718266 L11.7399381,11.3281734 C11.7399381,10.7758886 12.1876533,10.3281734 12.7399381,10.3281734 L15.6399381,10.3274823 L15.6408669,8.33043661 C15.6408669,7.77815186 16.0885821,7.33043661 16.6408669,7.33043661 Z" id="Combined-Shape"></path>
										</g>
									</g>
								</g>
							</svg>
						</button>
						<button id="action" mat-Button matTooltip="bannir">
							<svg width="26px" height="24px" viewBox="0 0 26 24">
								<title>bannir</title>
								<g id="UI" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
									<g id="bannir" transform="translate(-1228.000000, -638.000000)">
										<g id="icon-bannir" transform="translate(1229.000000, 638.000000)" fill="#feefcf">
											<path d="M20.8882608,19.8094817 C21.4405455,19.8094817 21.8882608,20.257197 21.8882608,20.8094817 L21.8882608,20.900515 C21.8882608,21.4527998 22.335976,21.900515 22.8882608,21.900515 L22.8924777,21.9005061 L23.0346124,21.8999067 C23.5868922,21.8975778 24.0364915,22.3434011 24.0388204,22.8956809 L24.0388293,23 C24.0388293,23.5522847 23.5911141,24 23.0388293,24 L5.69797572,24 C5.14569097,24 4.69797572,23.5522847 4.69797572,23 L4.69797572,22.895672 C4.69797572,22.3433873 5.14569097,21.895672 5.69797572,21.895672 L5.89139625,21.895672 C6.443681,21.895672 6.89139625,21.4479568 6.89139625,20.895672 L6.89139625,20.8094817 C6.89139625,20.257197 7.3391115,19.8094817 7.89139625,19.8094817 L20.8882608,19.8094817 Z M8.25375462,0.566895191 L9.40694775,1.64226518 L8.7840534,2.86024022 C8.53258286,3.35195255 8.72733732,3.9544213 9.21904965,4.20589184 C9.52321604,4.361448 9.88574733,4.35096041 10.1804125,4.17808076 L11.3748119,3.47732821 L12.7090854,4.72024442 L13.1679844,4.22937254 C13.582319,3.78505312 14.2783956,3.76074559 14.722715,4.17508015 L15.7070151,5.09295489 C16.1513345,5.50728944 16.1756421,6.20336601 15.7613075,6.64768543 L15.3024656,7.13861061 L16.6326339,8.3803265 L16.0169054,9.62069847 C15.8650017,9.9267053 15.8798285,10.2890851 16.0562234,10.5816595 C16.321013,11.0208485 16.8698507,11.1834994 17.3255936,10.9761809 L17.4289408,10.9217282 L18.600498,10.2153895 L19.7536912,11.2907595 C20.1265362,11.6384432 20.174045,12.2043609 19.8828967,12.6070584 L19.8030465,12.7041116 L15.121261,17.7247119 C14.7735774,18.0975569 14.2076596,18.1450657 13.8049621,17.8539173 L13.7079089,17.7740672 L12.5547158,16.6986972 L13.116335,15.5373268 C13.2580556,15.2442634 13.2482573,14.9005584 13.0900713,14.6160446 C12.8408684,14.1678276 12.2980812,13.9860031 11.8353388,14.1771889 L11.730143,14.2279788 L10.5868516,14.8636342 L9.25655013,13.6220612 L2.75186832,20.5986009 C2.33753377,21.0429204 1.64145719,21.0672279 1.19713778,20.6528933 L0.212837636,19.7350186 C-0.231481777,19.320684 -0.255789306,18.6246075 0.158545249,18.1802881 L6.6631699,11.203695 L5.32902969,9.96063589 L5.88338472,8.77578841 C6.11743225,8.27554827 5.90164051,7.6802905 5.40140037,7.44624296 C5.10654516,7.30828895 4.76299392,7.32249019 4.48053028,7.48430861 L3.36116553,8.12557287 L2.20797239,7.05020288 C1.8040569,6.67354558 1.78195976,6.04076631 2.15861705,5.63685081 L6.84040256,0.616250533 C7.21705985,0.212335036 7.84983912,0.190237897 8.25375462,0.566895191 Z" id="Combined-Shape"></path>
										</g>
									</g>
								</g>
							</svg>
						</button>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<ng-template #no_room>
	<mat-error  class="no-room" >Aucun groupe sélectionné</mat-error>
</ng-template>
